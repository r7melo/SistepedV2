{% extends "base.html" %}

{% block content %}
<div class="page-container">
    
    <div class="page-header">
        <h2>Histórico de Notas</h2>
    </div>

    <div class="toolbar">
        <div class="toolbar-left">
            <div class="search-box">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input type="text" placeholder="Buscar aluno...">
            </div>

            <button class="btn-outline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                Filtrar
            </button>

            <a href="{{ url_for('notas.cadastrar_notas') }}"><button class="btn-black small">Lançar Novas</button></a>
        </div>
    </div>

    <div class="table-responsive">
        <table class="clean-table">
            <thead>
                <tr>
                    <th style="width: 35%;">Aluno</th>
                    <th>Turma</th>
                    <th>Disciplina</th>
                    <th>Nota</th> <th class="text-gray">Data</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% if notas %}
                    {% for nota in notas %}
                    <tr>
                        <td>
                            <div style="display: flex; flex-direction: column;">
                                <strong style="font-size: 0.95rem;">{{ nota.nome_aluno }}</strong>
                                <span style="font-size: 0.8rem; color: #666;">{{ nota.atividade }}</span>
                            </div>
                        </td>
                        
                        <td><span class="badge">{{ nota.nome_turma }}</span></td>
                        <td><span class="badge" style="background: #f3f4f6; color: #374151;">{{ nota.disciplina }}</span></td>
                        
                        <td>
                            <strong style="color: {% if nota.nota >= 6 %}#059669{% else %}#dc2626{% endif %};">
                                {{ nota.nota }}
                            </strong>
                        </td>

                        <td class="text-gray">{{ nota.data.strftime('%d/%m/%Y') if nota.data else '-' }}</td>
                        
                        <td class="text-right">
                            <button class="icon-btn-sm">•••</button>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" style="text-align:center; padding: 40px; color: #666;">
                            Nenhuma nota lançada no sistema.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}